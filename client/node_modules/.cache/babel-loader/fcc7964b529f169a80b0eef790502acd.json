{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI 571\\\\hw8\\\\client\\\\src\\\\Components\\\\SelectBar.js\";\nimport React from \"react\";\nimport AsyncSelect from \"react-select/async\";\nimport { withRouter } from \"react-router-dom\";\nimport { debounce } from \"throttle-debounce\";\n\nclass SelectBar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.loadOptions = (inputValue, callback) => {\n      setTimeout(() => {\n        fetch(\"https://yutong-li.cognitiveservices.azure.com/bing/v7.0/suggestions?mkt=en-US&q=\" + this.state.inputValue, {\n          headers: {\n            'Ocp-Apim-Subscription-Key': 'a42b6d1b1fad47d7b33425d7eea2f04f'\n          }\n        }).then(res => {\n          return res.json();\n        }).then(res => {\n          let suggestions = [];\n\n          if (\"suggestionGroups\" in res) {\n            var resfilter = res[\"suggestionGroups\"][0][\"searchSuggestions\"];\n\n            for (var i = 0; i < resfilter.length; i++) {\n              let val = resfilter[i][\"displayText\"];\n              suggestions.push({\n                value: val,\n                label: val\n              });\n            }\n          }\n\n          callback(suggestions);\n        });\n      });\n    };\n\n    this.handleInputChange = newValue => {\n      const inputValue = newValue.replace(/\\W/g, '');\n      this.setState({\n        inputValue\n      });\n      return inputValue;\n    };\n\n    this.handleChange = q => {\n      console.log(q.value);\n      let queryString = \"q=\" + q.value;\n      this.props.history.push('/search?' + queryString);\n    };\n\n    this.state = {\n      options: {}\n    };\n    this.loadOptions = debounce(1000, this.loadOptions);\n  }\n\n  static getDerivedStateFromProps(nextProps, nextState) {\n    console.log(nextProps.location.pathname);\n    return null;\n  }\n\n  render() {\n    return React.createElement(AsyncSelect, {\n      placeholder: \"Enter keyword ..\",\n      className: \"selectBar\",\n      onInputChange: this.handleInputChange,\n      loadOptions: this.loadOptions,\n      onChange: this.handleChange,\n      noOptionsMessage: () => {\n        return \"No Match\";\n      },\n      inputId: \"selectInput\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default withRouter(SelectBar);","map":{"version":3,"sources":["C:/Users/75165/Documents/course/CSCI 571/hw8/client/src/Components/SelectBar.js"],"names":["React","AsyncSelect","withRouter","debounce","SelectBar","Component","constructor","props","loadOptions","inputValue","callback","setTimeout","fetch","state","headers","then","res","json","suggestions","resfilter","i","length","val","push","value","label","handleInputChange","newValue","replace","setState","handleChange","q","console","log","queryString","history","options","getDerivedStateFromProps","nextProps","nextState","location","pathname","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,QAAR,QAAuB,mBAAvB;;AAEA,MAAMC,SAAN,SAAwBJ,KAAK,CAACK,SAA9B,CAAwC;AACpCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAMnBC,WANmB,GAML,CAACC,UAAD,EAAaC,QAAb,KAA0B;AACpCC,MAAAA,UAAU,CAAC,MAAM;AACbC,QAAAA,KAAK,CACD,qFAAqF,KAAKC,KAAL,CAAWJ,UAD/F,EAC2G;AACxGK,UAAAA,OAAO,EAAE;AACL,yCAA6B;AADxB;AAD+F,SAD3G,CAAL,CAKOC,IALP,CAKYC,GAAG,IAAI;AACf,iBAAOA,GAAG,CAACC,IAAJ,EAAP;AACH,SAPD,EAOGF,IAPH,CAOSC,GAAD,IAAS;AACb,cAAIE,WAAW,GAAG,EAAlB;;AACA,cAAI,sBAAsBF,GAA1B,EAA+B;AAC3B,gBAAIG,SAAS,GAAGH,GAAG,CAAC,kBAAD,CAAH,CAAwB,CAAxB,EAA2B,mBAA3B,CAAhB;;AACA,iBAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,SAAS,CAACE,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,kBAAIE,GAAG,GAAGH,SAAS,CAACC,CAAD,CAAT,CAAa,aAAb,CAAV;AACAF,cAAAA,WAAW,CAACK,IAAZ,CAAiB;AAACC,gBAAAA,KAAK,EAAEF,GAAR;AAAaG,gBAAAA,KAAK,EAAEH;AAApB,eAAjB;AACH;AACJ;;AACDZ,UAAAA,QAAQ,CAACQ,WAAD,CAAR;AACH,SAjBD;AAkBH,OAnBS,CAAV;AAoBH,KA3BkB;;AAAA,SAkCnBQ,iBAlCmB,GAkCEC,QAAD,IAAc;AAC9B,YAAMlB,UAAU,GAAGkB,QAAQ,CAACC,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CAAnB;AACA,WAAKC,QAAL,CAAc;AAACpB,QAAAA;AAAD,OAAd;AACA,aAAOA,UAAP;AACH,KAtCkB;;AAAA,SAwCnBqB,YAxCmB,GAwCHC,CAAD,IAAO;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACP,KAAd;AACA,UAAIU,WAAW,GAAG,OAAOH,CAAC,CAACP,KAA3B;AACA,WAAKjB,KAAL,CAAW4B,OAAX,CAAmBZ,IAAnB,CAAwB,aAAaW,WAArC;AACH,KA5CkB;;AAEf,SAAKrB,KAAL,GAAa;AAACuB,MAAAA,OAAO,EAAE;AAAV,KAAb;AACA,SAAK5B,WAAL,GAAmBL,QAAQ,CAAC,IAAD,EAAO,KAAKK,WAAZ,CAA3B;AACH;;AAyBD,SAAO6B,wBAAP,CAAgCC,SAAhC,EAA2CC,SAA3C,EAAsD;AAClDP,IAAAA,OAAO,CAACC,GAAR,CAAYK,SAAS,CAACE,QAAV,CAAmBC,QAA/B;AACA,WAAO,IAAP;AACH;;AAcDC,EAAAA,MAAM,GAAG;AACL,WACI,oBAAC,WAAD;AACI,MAAA,WAAW,EAAC,kBADhB;AAEI,MAAA,SAAS,EAAC,WAFd;AAGI,MAAA,aAAa,EAAE,KAAKhB,iBAHxB;AAII,MAAA,WAAW,EAAE,KAAKlB,WAJtB;AAKI,MAAA,QAAQ,EAAE,KAAKsB,YALnB;AAMI,MAAA,gBAAgB,EAAE,MAAM;AACpB,eAAO,UAAP;AACH,OARL;AASI,MAAA,OAAO,EAAC,aATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAaH;;AA7DmC;;AAgExC,eAAe5B,UAAU,CAACE,SAAD,CAAzB","sourcesContent":["import React from \"react\";\r\nimport AsyncSelect from \"react-select/async\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {debounce} from \"throttle-debounce\";\r\n\r\nclass SelectBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {options: {}};\r\n        this.loadOptions = debounce(1000, this.loadOptions);\r\n    }\r\n\r\n    loadOptions = (inputValue, callback) => {\r\n        setTimeout(() => {\r\n            fetch(\r\n                \"https://yutong-li.cognitiveservices.azure.com/bing/v7.0/suggestions?mkt=en-US&q=\" + this.state.inputValue, {\r\n                    headers: {\r\n                        'Ocp-Apim-Subscription-Key': 'a42b6d1b1fad47d7b33425d7eea2f04f'\r\n                    }\r\n                }).then(res => {\r\n                return res.json();\r\n            }).then((res) => {\r\n                let suggestions = [];\r\n                if (\"suggestionGroups\" in res) {\r\n                    var resfilter = res[\"suggestionGroups\"][0][\"searchSuggestions\"];\r\n                    for (var i = 0; i < resfilter.length; i++) {\r\n                        let val = resfilter[i][\"displayText\"];\r\n                        suggestions.push({value: val, label: val});\r\n                    }\r\n                }\r\n                callback(suggestions);\r\n            });\r\n        });\r\n    };\r\n\r\n    static getDerivedStateFromProps(nextProps, nextState) {\r\n        console.log(nextProps.location.pathname);\r\n        return null;\r\n    }\r\n\r\n    handleInputChange = (newValue) => {\r\n        const inputValue = newValue.replace(/\\W/g, '');\r\n        this.setState({inputValue});\r\n        return inputValue;\r\n    };\r\n\r\n    handleChange = (q) => {\r\n        console.log(q.value);\r\n        let queryString = \"q=\" + q.value;\r\n        this.props.history.push('/search?' + queryString);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <AsyncSelect\r\n                placeholder=\"Enter keyword ..\"\r\n                className=\"selectBar\"\r\n                onInputChange={this.handleInputChange}\r\n                loadOptions={this.loadOptions}\r\n                onChange={this.handleChange}\r\n                noOptionsMessage={() => {\r\n                    return \"No Match\";\r\n                }}\r\n                inputId=\"selectInput\"\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(SelectBar);\r\n"]},"metadata":{},"sourceType":"module"}