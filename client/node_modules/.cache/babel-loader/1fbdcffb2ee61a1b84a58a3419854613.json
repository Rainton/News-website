{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import DetailFavorite from\"./DetailFavorite\";import LoadSpinner from\"./LoadSpinner\";import Col from\"react-bootstrap/Col\";var FavoriteList=/*#__PURE__*/function(_Component){_inherits(FavoriteList,_Component);function FavoriteList(props){var _this;_classCallCheck(this,FavoriteList);_this=_possibleConstructorReturn(this,_getPrototypeOf(FavoriteList).call(this,props));_this.callGuardian=function(id,idx){fetch(\"https://yli59322-hw8-571-backend.appspot.com/guardian/article\"+id).then(function(res){return res.json();}).then(function(res){var newdata=_this.state.datas;newdata.push(res['response']['content']);_this.setState({datas:newdata});if(idx===_this.props.ids.length-1)_this.setState({isLoaded:true});},function(error){_this.setState({error:error});});};_this.callNYTimes=function(id,idx){fetch(\"https://yli59322-hw8-571-backend.appspot.com/nytimes/article\"+id).then(function(res){return res.json();}).then(function(res){var newdata=_this.state.datas;newdata.push(res['response']['docs'][0]);_this.setState({datas:newdata});if(idx===_this.props.ids.length-1)_this.setState({isLoaded:true});},function(error){_this.setState({error:error});});};_this.state={ids:props.ids,isLoaded:false,datas:[]};return _this;}_createClass(FavoriteList,[{key:\"componentDidMount\",value:function componentDidMount(){var id=this.state.ids;for(var i=0;i<id.length;i++){var checking=id[i].substr(4,4)!=='http';if(checking)this.callGuardian(id[i],i);else this.callNYTimes(id[i],i);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){console.log(this.state);console.log(prevState);if(prevState.ids!==this.state.ids){if(this.state.isLoaded===false){var id=this.state.ids;for(var i=0;i<id.length;i++){var checking=id[i].substr(4,4)!=='http';if(checking)this.callGuardian(id[i],i);else this.callNYTimes(id[i],i);}}}}},{key:\"render\",value:function render(){if(this.props.ids.length===0){return null;}else if(this.state.error){return React.createElement(\"div\",null,\"Error: \",this.state.error.message);}else if(!this.state.isLoaded){return React.createElement(\"div\",{className:\"load-container\"},React.createElement(LoadSpinner,null));}else{var array=[];for(var i=0;i<this.state.datas.length;i++){array.push(React.createElement(Col,{md:3,style:{\"padding\":0}},React.createElement(DetailFavorite,{key:i,data:this.state.datas[i],handleDelete:this.props.handleDelete})));}return React.createElement(\"div\",{style:{\"display\":\"flex\",\"flex-wrap\":\"wrap\"}},array);}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,nextState){console.log(nextProps);console.log(nextState);console.log(nextProps.ids===nextState.ids);if(nextProps.ids!==nextState.ids){console.log(\"update\");return{ids:nextProps.ids,datas:[],isLoaded:false};}return null;}}]);return FavoriteList;}(Component);export default FavoriteList;","map":{"version":3,"sources":["C:/Users/75165/Documents/course/CSCI571/hw8/client/src/Components/FavoriteList.js"],"names":["React","Component","DetailFavorite","LoadSpinner","Col","FavoriteList","props","callGuardian","id","idx","fetch","then","res","json","newdata","state","datas","push","setState","ids","length","isLoaded","error","callNYTimes","i","checking","substr","prevProps","prevState","snapshot","console","log","message","array","handleDelete","nextProps","nextState"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport DetailFavorite from \"./DetailFavorite\";\r\nimport LoadSpinner from \"./LoadSpinner\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nclass FavoriteList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {ids: props.ids, isLoaded: false, datas: []};\r\n    }\r\n\r\n    callGuardian = (id, idx) => {\r\n        fetch(\"https://yli59322-hw8-571-backend.appspot.com/guardian/article\" + id)\r\n            .then(res => res.json())\r\n            .then(\r\n                res => {\r\n                    let newdata = this.state.datas;\r\n                    newdata.push(res['response']['content']);\r\n                    this.setState({datas: newdata});\r\n                    if (idx === this.props.ids.length - 1)\r\n                        this.setState({isLoaded: true});\r\n                }, error => {\r\n                    this.setState({error});\r\n                })\r\n    };\r\n\r\n    callNYTimes = (id, idx) => {\r\n        fetch(\"https://yli59322-hw8-571-backend.appspot.com/nytimes/article\" + id)\r\n            .then(res => res.json())\r\n            .then(\r\n                res => {\r\n                    let newdata = this.state.datas;\r\n                    newdata.push(res['response']['docs'][0]);\r\n                    this.setState({datas: newdata});\r\n                    if (idx === this.props.ids.length - 1)\r\n                        this.setState({isLoaded: true});\r\n                }, error => {\r\n                    this.setState({error});\r\n                })\r\n    };\r\n\r\n    static getDerivedStateFromProps(nextProps, nextState) {\r\n        console.log(nextProps);\r\n        console.log(nextState);\r\n        console.log(nextProps.ids === nextState.ids);\r\n        if (nextProps.ids !== nextState.ids) {\r\n            console.log(\"update\");\r\n            return {\r\n                ids: nextProps.ids,\r\n                datas: [],\r\n                isLoaded: false\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        let id = this.state.ids;\r\n        for (let i = 0; i < id.length; i++) {\r\n            let checking = id[i].substr(4, 4) !== 'http';\r\n            if (checking)\r\n                this.callGuardian(id[i], i);\r\n            else\r\n                this.callNYTimes(id[i], i);\r\n        }\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        console.log(this.state);\r\n        console.log(prevState);\r\n        if(prevState.ids !== this.state.ids){\r\n            if (this.state.isLoaded === false) {\r\n                let id = this.state.ids;\r\n                for (let i = 0; i < id.length; i++) {\r\n                    let checking = id[i].substr(4, 4) !== 'http';\r\n                    if (checking)\r\n                        this.callGuardian(id[i], i);\r\n                    else\r\n                        this.callNYTimes(id[i], i);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.props.ids.length === 0) {\r\n            return null;\r\n        } else if (this.state.error) {\r\n            return <div>Error: {this.state.error.message}</div>;\r\n        } else if (!this.state.isLoaded) {\r\n            return (\r\n                <div className=\"load-container\">\r\n                    <LoadSpinner/>\r\n                </div>\r\n            );\r\n        } else {\r\n            let array = [];\r\n            for (let i = 0; i < this.state.datas.length; i++) {\r\n                array.push(\r\n                    <Col md={3} style={{\"padding\": 0}}>\r\n                        <DetailFavorite key={i} data={this.state.datas[i]} handleDelete={this.props.handleDelete}/>\r\n                    </Col>\r\n                );\r\n            }\r\n            return (\r\n                <div style={{\"display\": \"flex\", \"flex-wrap\": \"wrap\"}}>\r\n                    {array}\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default FavoriteList;"]},"metadata":{},"sourceType":"module"}