{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI 571\\\\hw8\\\\client\\\\src\\\\Components\\\\DetailArticle.js\";\nimport React from \"react\";\nimport Card from \"react-bootstrap/Card\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Image from \"react-bootstrap/Image\";\nimport LoadSpinner from \"./LoadSpinner\";\nimport DetailShare from \"./DetailShare\";\nimport { FaRegBookmark, IoIosArrowDown, IoIosArrowUp } from \"react-icons/all\";\n\nclass DetailArticle extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.callGuardian = id => {\n      fetch(\"http://localhost:9000/guardian/article\" + id).then(res => res.json()).then(res => {\n        this.setState({\n          isLoaded: true,\n          data: res['response']['content']\n        });\n      }, error => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n      }).then(() => {\n        if (this.desRef.current.scrollHeight === this.desRef.current.clientHeight) document.getElementById(\"arrow-down\").style.display = \"none\";\n      });\n    };\n\n    this.callNYTimes = id => {\n      fetch(\"http://localhost:9000/nytimes/article\" + id).then(res => res.json()).then(res => {\n        this.setState({\n          isLoaded: true,\n          data: res['response']['docs']\n        });\n      }, error => {\n        this.setState({\n          isLoaded: true,\n          error\n        });\n      }).then(() => {\n        if (this.desRef.current.scrollHeight === this.desRef.current.clientHeight) document.getElementById(\"arrow-down\").style.display = \"none\";\n      });\n    };\n\n    this.expand = () => {\n      document.getElementById(\"small-card\").style.display = \"none\";\n      document.getElementById(\"big-card\").style.display = \"flex\";\n    };\n\n    this.fold = () => {\n      document.getElementById(\"small-card\").style.display = \"flex\";\n      document.getElementById(\"big-card\").style.display = \"none\";\n    };\n\n    this.state = {\n      error: null,\n      isLoaded: false,\n      data: [],\n      GuardianChecked: props.checked,\n      id: props.id\n    };\n    console.log(props);\n    this.smallRef = React.createRef();\n    this.desRef = React.createRef();\n    this.arrowRef = React.createRef();\n    this.bigRef = React.createRef();\n  }\n\n  componentDidMount() {\n    if (this.state.GuardianChecked) this.callGuardian(this.state.id);else this.callNYTimes(this.state.id);\n  }\n\n  render() {\n    if (this.state.error) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Error: \", this.state.error.message);\n    } else if (!this.state.isLoaded) {\n      return React.createElement(LoadSpinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      });\n    } else {\n      let title;\n      let image;\n      let date;\n      let url;\n      let description;\n\n      if (this.state.GuardianChecked) {\n        title = this.state.data['webTitle'];\n        date = this.state.data['webPublicationDate'].slice(0, 10);\n        description = this.state.data['blocks']['body']['0']['bodyTextSummary'];\n        url = this.state.data['webUrl'];\n        if ('main' in this.state.data['blocks'] && this.state.data['blocks']['main']['elements']['0']['assets'].length !== 0) image = this.state.data['blocks']['main']['elements']['0']['assets'].slice(-1)[0]['file'];else image = 'https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png';\n      } else {\n        title = this.state.data[0]['headline']['main'];\n        date = this.state.data[0]['pub_date'].slice(0, 10);\n        description = this.state.data[0]['abstract'];\n        url = this.state.data[0]['web_url'];\n\n        if ('multimedia' in this.state.data[0] && this.state.data[0]['multimedia'] !== null && this.state.data[0]['multimedia'].length !== 0) {\n          let i = 0;\n\n          for (; i < this.state.data[0]['multimedia'].length; i++) {\n            if (this.state.data[0]['multimedia'][i]['width'] >= 2000) break;\n          }\n\n          if (i < this.state.data[0]['multimedia'].length) {\n            let tmpUrl = this.state.data[0]['multimedia'][i]['url'];\n            if (tmpUrl[0] === 'i') image = 'https://www.nytimes.com/' + tmpUrl;else image = tmpUrl;\n          } else image = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\n        } else image = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\n      }\n\n      return React.createElement(\"div\", {\n        style: {\n          boxSizing: \"content-box\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: \"detailCard\",\n        ref: this.smallRef,\n        id: \"small-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, title))), React.createElement(Card.Text, {\n        style: {\n          \"marginBottom\": 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, date)), React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(DetailShare, {\n        url: url,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(FaRegBookmark, {\n        color: \"red\",\n        style: {\n          \"height\": \"2em\",\n          \"float\": \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"align-items-center justify-content-center\",\n        style: {\n          display: \"flex\",\n          width: \"100%\",\n          height: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Image, {\n        className: \"img-fluid\",\n        src: image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      })), React.createElement(Card.Text, {\n        className: \"detailDescription\",\n        ref: this.desRef,\n        id: \"small-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, description), React.createElement(IoIosArrowDown, {\n        style: {\n          \"height\": \"1.5em\",\n          \"width\": \"1.5em\",\n          \"float\": \"right\"\n        },\n        onClick: this.expand,\n        id: \"arrow-down\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })))), React.createElement(Card, {\n        className: \"detailCard\",\n        ref: this.bigRef,\n        id: \"big-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Card.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, title))), React.createElement(Card.Text, {\n        style: {\n          \"marginBottom\": 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, date)), React.createElement(Col, {\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(DetailShare, {\n        url: url,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(FaRegBookmark, {\n        color: \"red\",\n        style: {\n          \"height\": \"2em\",\n          \"float\": \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"align-items-center justify-content-center\",\n        style: {\n          display: \"flex\",\n          width: \"100%\",\n          height: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Image, {\n        className: \"img-fluid\",\n        src: image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      })), React.createElement(Card.Text, {\n        className: \"detailDescription\",\n        id: \"big-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, description), React.createElement(IoIosArrowUp, {\n        style: {\n          \"height\": \"1.5em\",\n          \"width\": \"1.5em\",\n          \"float\": \"right\"\n        },\n        onClick: this.fold,\n        id: \"arrow-up\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      })))));\n    }\n  }\n\n}\n\nexport default DetailArticle;","map":{"version":3,"sources":["C:/Users/75165/Documents/course/CSCI 571/hw8/client/src/Components/DetailArticle.js"],"names":["React","Card","Row","Col","Image","LoadSpinner","DetailShare","FaRegBookmark","IoIosArrowDown","IoIosArrowUp","DetailArticle","Component","constructor","props","callGuardian","id","fetch","then","res","json","setState","isLoaded","data","error","desRef","current","scrollHeight","clientHeight","document","getElementById","style","display","callNYTimes","expand","fold","state","GuardianChecked","checked","console","log","smallRef","createRef","arrowRef","bigRef","componentDidMount","render","message","title","image","date","url","description","slice","length","i","tmpUrl","boxSizing","width","height"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Image from \"react-bootstrap/Image\";\r\nimport LoadSpinner from \"./LoadSpinner\";\r\nimport DetailShare from \"./DetailShare\";\r\nimport {FaRegBookmark, IoIosArrowDown, IoIosArrowUp} from \"react-icons/all\";\r\n\r\nclass DetailArticle extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {error: null, isLoaded: false, data: [], GuardianChecked: props.checked, id: props.id};\r\n        console.log(props);\r\n        this.smallRef = React.createRef();\r\n        this.desRef = React.createRef();\r\n        this.arrowRef = React.createRef();\r\n        this.bigRef = React.createRef();\r\n    }\r\n\r\n    callGuardian = (id) => {\r\n        fetch(\"http://localhost:9000/guardian/article\" + id)\r\n            .then(res => res.json())\r\n            .then(\r\n                res => {\r\n                    this.setState({isLoaded: true, data: res['response']['content']});\r\n                }, error => {\r\n                    this.setState({isLoaded: true, error});\r\n                })\r\n            .then(\r\n                () => {\r\n                    if (this.desRef.current.scrollHeight === this.desRef.current.clientHeight)\r\n                        document.getElementById(\"arrow-down\").style.display = \"none\";\r\n                }\r\n            )\r\n    };\r\n\r\n    callNYTimes = (id) => {\r\n        fetch(\"http://localhost:9000/nytimes/article\" + id)\r\n            .then(res => res.json())\r\n            .then(\r\n                res => {\r\n                    this.setState({isLoaded: true, data: res['response']['docs']});\r\n                }, error => {\r\n                    this.setState({isLoaded: true, error});\r\n                })\r\n            .then(\r\n                () => {\r\n                    if (this.desRef.current.scrollHeight === this.desRef.current.clientHeight)\r\n                        document.getElementById(\"arrow-down\").style.display = \"none\";\r\n                }\r\n            )\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (this.state.GuardianChecked)\r\n            this.callGuardian(this.state.id);\r\n        else\r\n            this.callNYTimes(this.state.id);\r\n    }\r\n\r\n    expand = () => {\r\n        document.getElementById(\"small-card\").style.display = \"none\";\r\n        document.getElementById(\"big-card\").style.display = \"flex\";\r\n    };\r\n\r\n    fold = () => {\r\n        document.getElementById(\"small-card\").style.display = \"flex\";\r\n        document.getElementById(\"big-card\").style.display = \"none\";\r\n    };\r\n\r\n    render() {\r\n        if (this.state.error) {\r\n            return <div>Error: {this.state.error.message}</div>;\r\n        } else if (!this.state.isLoaded) {\r\n            return <LoadSpinner/>;\r\n        } else {\r\n            let title;\r\n            let image;\r\n            let date;\r\n            let url;\r\n            let description;\r\n            if (this.state.GuardianChecked) {\r\n                title = this.state.data['webTitle'];\r\n                date = this.state.data['webPublicationDate'].slice(0, 10);\r\n                description = this.state.data['blocks']['body']['0']['bodyTextSummary'];\r\n                url = this.state.data['webUrl'];\r\n                if ('main' in this.state.data['blocks'] && this.state.data['blocks']['main']['elements']['0']['assets'].length !== 0)\r\n                    image = this.state.data['blocks']['main']['elements']['0']['assets'].slice(-1)[0]['file'];\r\n                else\r\n                    image = 'https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png';\r\n            } else {\r\n                title = this.state.data[0]['headline']['main'];\r\n                date = this.state.data[0]['pub_date'].slice(0, 10);\r\n                description = this.state.data[0]['abstract'];\r\n                url = this.state.data[0]['web_url'];\r\n                if ('multimedia' in this.state.data[0] && this.state.data[0]['multimedia'] !== null && this.state.data[0]['multimedia'].length !== 0) {\r\n                    let i = 0;\r\n                    for (; i < this.state.data[0]['multimedia'].length; i++) {\r\n                        if (this.state.data[0]['multimedia'][i]['width'] >= 2000)\r\n                            break;\r\n                    }\r\n                    if (i < this.state.data[0]['multimedia'].length) {\r\n                        let tmpUrl = this.state.data[0]['multimedia'][i]['url'];\r\n                        if (tmpUrl[0] === 'i')\r\n                            image = 'https://www.nytimes.com/' + tmpUrl;\r\n                        else\r\n                            image = tmpUrl;\r\n                    } else\r\n                        image = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\r\n                } else\r\n                    image = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\r\n            }\r\n            return (\r\n                <div style={{boxSizing: \"content-box\"}}>\r\n                    <Card className=\"detailCard\" ref={this.smallRef} id=\"small-card\">\r\n                        <div className=\"container-fluid\">\r\n                            <Card.Body>\r\n                                <Card.Title>\r\n                                    <strong><em>{title}</em></strong>\r\n                                </Card.Title>\r\n                                <Card.Text style={{\"marginBottom\": 0}}>\r\n                                    <Row>\r\n                                        <Col md={8}>\r\n                                            <em>{date}</em>\r\n                                        </Col>\r\n                                        <Col md={3}>\r\n                                            <DetailShare url={url}/>\r\n                                        </Col>\r\n                                        <Col md={1}>\r\n                                            <FaRegBookmark color=\"red\" style={{\"height\": \"2em\", \"float\": \"right\"}}/>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Card.Text>\r\n                                <div className=\"align-items-center justify-content-center\"\r\n                                     style={{display: \"flex\", width: \"100%\", height: \"100%\"}}>\r\n                                    <Image className=\"img-fluid\" src={image}/>\r\n                                </div>\r\n                                <Card.Text className=\"detailDescription\" ref={this.desRef} id=\"small-description\">\r\n                                    {description}\r\n                                </Card.Text>\r\n                                <IoIosArrowDown\r\n                                    style={{\"height\": \"1.5em\", \"width\": \"1.5em\", \"float\": \"right\"}}\r\n                                    onClick={this.expand}\r\n                                    id=\"arrow-down\"\r\n                                />\r\n                            </Card.Body>\r\n                        </div>\r\n                    </Card>\r\n                    <Card className=\"detailCard\" ref={this.bigRef} id=\"big-card\">\r\n                        <div className=\"container-fluid\">\r\n                            <Card.Body>\r\n                                <Card.Title>\r\n                                    <strong><em>{title}</em></strong>\r\n                                </Card.Title>\r\n                                <Card.Text style={{\"marginBottom\": 0}}>\r\n                                    <Row>\r\n                                        <Col md={8}>\r\n                                            <em>{date}</em>\r\n                                        </Col>\r\n                                        <Col md={3}>\r\n                                            <DetailShare url={url}/>\r\n                                        </Col>\r\n                                        <Col md={1}>\r\n                                            <FaRegBookmark color=\"red\" style={{\"height\": \"2em\", \"float\": \"right\"}}/>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Card.Text>\r\n                                <div className=\"align-items-center justify-content-center\"\r\n                                     style={{display: \"flex\", width: \"100%\", height: \"100%\"}}>\r\n                                    <Image className=\"img-fluid\" src={image}/>\r\n                                </div>\r\n                                <Card.Text className=\"detailDescription\" id=\"big-description\">\r\n                                    {description}\r\n                                </Card.Text>\r\n                                <IoIosArrowUp\r\n                                    style={{\"height\": \"1.5em\", \"width\": \"1.5em\", \"float\": \"right\"}}\r\n                                    onClick={this.fold}\r\n                                    id=\"arrow-up\"\r\n                                />\r\n                            </Card.Body>\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default DetailArticle;"]},"metadata":{},"sourceType":"module"}