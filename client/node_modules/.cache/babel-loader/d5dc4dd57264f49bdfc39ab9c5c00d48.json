{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI 571\\\\hw8\\\\client\\\\src\\\\Components\\\\DetailFavorite.js\";\nimport React from \"react\";\nimport Card from \"react-bootstrap/Card\";\nimport Image from \"react-bootstrap/Image\";\nimport Badge from \"react-bootstrap/Badge\";\nimport { FaTrash } from \"react-icons/all\";\nimport { withRouter } from \"react-router-dom\";\nimport { toast, ToastContainer, Zoom } from \"react-toastify\";\nimport FavoriteShare from \"./FavoriteShare\";\n\nclass DetailFavorite extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.clickCard = e => {\n      let clickTarget = e.target.localName;\n      if (clickTarget === \"path\" || clickTarget === \"span\" || clickTarget === \"circle\" || clickTarget === \"svg\") return;\n      let id;\n      if (this.state.GuardianChecked) id = this.state.data['id'];else id = this.state.data['web_url'];\n      let queryString = \"id=\" + id;\n      this.props.history.push('/article?' + queryString);\n    };\n\n    this.bookmarkUnClick = () => {\n      let title;\n      let source;\n\n      if (this.state.GuardianChecked) {\n        title = this.state.data['webTitle'];\n        source = \"GUARDIAN\";\n      } else {\n        title = this.state.data['headline']['main'];\n        source = \"NYTIMES\";\n      }\n\n      let id;\n      if (this.state.GuardianChecked) id = \"?id=\" + this.state.data['id'];else id = \"?id=\" + this.state.data['web_url'];\n      toast(\"Removing - \" + title);\n      let bookmarks = JSON.parse(window.localStorage.getItem(\"bookmarks\"));\n      console.log(bookmarks);\n      let newbookmarks = [];\n\n      for (let i = 0; i < bookmarks.length; i++) {\n        if (bookmarks[i] !== id) newbookmarks.push(bookmarks[i]);\n      }\n\n      window.localStorage.setItem(\"bookmarks\", JSON.stringify(newbookmarks));\n      console.log(JSON.parse(window.localStorage.getItem(\"bookmarks\")));\n    };\n\n    let checking = 'id' in props.data;\n    this.state = {\n      data: props.data,\n      GuardianChecked: checking\n    };\n  }\n\n  render() {\n    let title;\n    let image;\n    let date;\n    let url;\n    let id;\n    let section;\n    let sectionClassName;\n    let source;\n    let sourceClassName;\n\n    if (this.state.GuardianChecked) {\n      source = \"GUARDIAN\";\n      sourceClassName = \"badge-guardian\";\n      title = this.state.data['webTitle'];\n      date = this.state.data['webPublicationDate'].slice(0, 10);\n      url = this.state.data['webUrl'];\n      id = this.state.data['id'];\n      if ('main' in this.state.data['blocks'] && this.state.data['blocks']['main']['elements']['0']['assets'].length !== 0) image = this.state.data['blocks']['main']['elements']['0']['assets'].slice(-1)[0]['file'];else image = 'https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png';\n      section = this.state.data['sectionId'].toUpperCase();\n      if (section === 'SPORT') section = 'SPORTS';\n      if (section === 'WORLD') sectionClassName = 'badge-world';else if (section === 'POLITICS') sectionClassName = 'badge-politics';else if (section === 'BUSINESS') sectionClassName = 'badge-business';else if (section === 'TECHNOLOGY') sectionClassName = 'badge-technology';else if (section === 'SPORTS') sectionClassName = 'badge-sports';else sectionClassName = 'badge-other';\n    } else {\n      source = \"NYTIMES\";\n      sourceClassName = \"badge-nytimes\";\n      title = this.state.data['headline']['main'];\n      date = this.state.data['pub_date'].slice(0, 10);\n      url = this.state.data['web_url'];\n      id = url;\n\n      if ('multimedia' in this.state.data && this.state.data['multimedia'] !== null && this.state.data['multimedia'].length !== 0) {\n        let i = 0;\n\n        for (; i < this.state.data['multimedia'].length; i++) {\n          if (this.state.data['multimedia'][i]['width'] >= 2000) break;\n        }\n\n        if (i < this.state.data['multimedia'].length) {\n          let tmpUrl = this.state.data['multimedia'][i]['url'];\n          if (tmpUrl[0] === 'i') image = 'https://www.nytimes.com/' + tmpUrl;else image = tmpUrl;\n        } else image = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\n      } else image = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\n\n      section = this.state.data['news_desk'].toUpperCase();\n      if (section === 'WORLD') sectionClassName = 'badge-world';else if (section === 'POLITICS') sectionClassName = 'badge-politics';else if (section === 'BUSINESS') sectionClassName = 'badge-business';else if (section === 'TECHNOLOGY') sectionClassName = 'badge-technology';else if (section === 'SPORTS') sectionClassName = 'badge-sports';else sectionClassName = 'badge-other';\n    }\n\n    return React.createElement(Card, {\n      onClick: this.clickCard,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        \"padding\": 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      transition: Zoom,\n      position: \"top-center\",\n      autoClose: 3000,\n      hideProgressBar: true,\n      newestOnTop: false,\n      closeOnClick: true,\n      rtl: false,\n      pauseOnVisibilityChange: true,\n      draggable: false,\n      pauseOnHover: true,\n      bodyClassName: \"toast-body\",\n      style: {\n        \"font-size\": \"0.8rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(Card.Title, {\n      className: \"small-card-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, title, React.createElement(FavoriteShare, {\n      url: url,\n      title: title,\n      source: source,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(FaTrash, {\n      onClick: this.bookmarkUnClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"align-items-center justify-content-center\",\n      style: {\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n        \"height\": \"100%\",\n        \"padding\": \"1.25rem\",\n        \"padding-bottom\": 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Image, {\n      className: \"img-thumbnail img-fluid\",\n      src: image,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    })), React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"em\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, date), React.createElement(\"span\", {\n      style: {\n        \"float\": \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Badge, {\n      className: sectionClassName,\n      style: {\n        \"margin-right\": \"0.2rem\",\n        \"float\": \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, section), React.createElement(Badge, {\n      className: sourceClassName,\n      style: {\n        \"float\": \"none\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, source))))));\n  }\n\n}\n\nexport default withRouter(DetailFavorite);","map":{"version":3,"sources":["C:/Users/75165/Documents/course/CSCI 571/hw8/client/src/Components/DetailFavorite.js"],"names":["React","Card","Image","Badge","FaTrash","withRouter","toast","ToastContainer","Zoom","FavoriteShare","DetailFavorite","Component","constructor","props","clickCard","e","clickTarget","target","localName","id","state","GuardianChecked","data","queryString","history","push","bookmarkUnClick","title","source","bookmarks","JSON","parse","window","localStorage","getItem","console","log","newbookmarks","i","length","setItem","stringify","checking","render","image","date","url","section","sectionClassName","sourceClassName","slice","toUpperCase","tmpUrl"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Image from \"react-bootstrap/Image\";\r\nimport Badge from \"react-bootstrap/Badge\";\r\nimport {FaTrash} from \"react-icons/all\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {toast, ToastContainer, Zoom} from \"react-toastify\";\r\nimport FavoriteShare from \"./FavoriteShare\";\r\n\r\nclass DetailFavorite extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let checking = 'id' in props.data;\r\n        this.state = {\r\n            data: props.data,\r\n            GuardianChecked: checking,\r\n        };\r\n    }\r\n\r\n    clickCard = e => {\r\n        let clickTarget = e.target.localName;\r\n        if (clickTarget === \"path\" || clickTarget === \"span\" || clickTarget === \"circle\" || clickTarget === \"svg\")\r\n            return;\r\n        let id;\r\n        if (this.state.GuardianChecked)\r\n            id = this.state.data['id'];\r\n        else\r\n            id = this.state.data['web_url'];\r\n        let queryString = \"id=\" + id;\r\n        this.props.history.push('/article?' + queryString);\r\n    };\r\n\r\n    bookmarkUnClick = () => {\r\n        let title;\r\n        let source;\r\n        if (this.state.GuardianChecked) {\r\n            title = this.state.data['webTitle'];\r\n            source = \"GUARDIAN\";\r\n        } else {\r\n            title = this.state.data['headline']['main'];\r\n            source = \"NYTIMES\";\r\n        }\r\n        let id;\r\n        if (this.state.GuardianChecked)\r\n            id = \"?id=\" + this.state.data['id'];\r\n        else\r\n            id = \"?id=\" + this.state.data['web_url'];\r\n        toast(\"Removing - \" + title);\r\n        let bookmarks = JSON.parse(window.localStorage.getItem(\"bookmarks\"));\r\n        console.log(bookmarks);\r\n        let newbookmarks = [];\r\n        for (let i = 0; i < bookmarks.length; i++) {\r\n            if (bookmarks[i] !== id)\r\n                newbookmarks.push(bookmarks[i]);\r\n        }\r\n        window.localStorage.setItem(\"bookmarks\", JSON.stringify(newbookmarks));\r\n        console.log(JSON.parse(window.localStorage.getItem(\"bookmarks\")));\r\n    };\r\n\r\n    render() {\r\n        let title;\r\n        let image;\r\n        let date;\r\n        let url;\r\n        let id;\r\n        let section;\r\n        let sectionClassName;\r\n        let source;\r\n        let sourceClassName;\r\n        if (this.state.GuardianChecked) {\r\n            source = \"GUARDIAN\";\r\n            sourceClassName = \"badge-guardian\";\r\n            title = this.state.data['webTitle'];\r\n            date = this.state.data['webPublicationDate'].slice(0, 10);\r\n            url = this.state.data['webUrl'];\r\n            id = this.state.data['id'];\r\n            if ('main' in this.state.data['blocks'] && this.state.data['blocks']['main']['elements']['0']['assets'].length !== 0)\r\n                image = this.state.data['blocks']['main']['elements']['0']['assets'].slice(-1)[0]['file'];\r\n            else\r\n                image = 'https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png';\r\n\r\n            section = this.state.data['sectionId'].toUpperCase();\r\n            if (section === 'SPORT')\r\n                section = 'SPORTS';\r\n            if (section === 'WORLD')\r\n                sectionClassName = 'badge-world';\r\n            else if (section === 'POLITICS')\r\n                sectionClassName = 'badge-politics';\r\n            else if (section === 'BUSINESS')\r\n                sectionClassName = 'badge-business';\r\n            else if (section === 'TECHNOLOGY')\r\n                sectionClassName = 'badge-technology';\r\n            else if (section === 'SPORTS')\r\n                sectionClassName = 'badge-sports';\r\n            else\r\n                sectionClassName = 'badge-other';\r\n\r\n        } else {\r\n            source = \"NYTIMES\";\r\n            sourceClassName = \"badge-nytimes\";\r\n            title = this.state.data['headline']['main'];\r\n            date = this.state.data['pub_date'].slice(0, 10);\r\n            url = this.state.data['web_url'];\r\n            id = url;\r\n            if ('multimedia' in this.state.data && this.state.data['multimedia'] !== null && this.state.data['multimedia'].length !== 0) {\r\n                let i = 0;\r\n                for (; i < this.state.data['multimedia'].length; i++) {\r\n                    if (this.state.data['multimedia'][i]['width'] >= 2000)\r\n                        break;\r\n                }\r\n                if (i < this.state.data['multimedia'].length) {\r\n                    let tmpUrl = this.state.data['multimedia'][i]['url'];\r\n                    if (tmpUrl[0] === 'i')\r\n                        image = 'https://www.nytimes.com/' + tmpUrl;\r\n                    else\r\n                        image = tmpUrl;\r\n                } else\r\n                    image = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\r\n            } else\r\n                image = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\r\n            section = this.state.data['news_desk'].toUpperCase();\r\n            if (section === 'WORLD')\r\n                sectionClassName = 'badge-world';\r\n            else if (section === 'POLITICS')\r\n                sectionClassName = 'badge-politics';\r\n            else if (section === 'BUSINESS')\r\n                sectionClassName = 'badge-business';\r\n            else if (section === 'TECHNOLOGY')\r\n                sectionClassName = 'badge-technology';\r\n            else if (section === 'SPORTS')\r\n                sectionClassName = 'badge-sports';\r\n            else\r\n                sectionClassName = 'badge-other';\r\n\r\n        }\r\n        return (\r\n            <Card onClick={this.clickCard}>\r\n                <div className=\"container-fluid\" style={{\"padding\": 0}}>\r\n                    <ToastContainer\r\n                        transition={Zoom}\r\n                        position=\"top-center\"\r\n                        autoClose={3000}\r\n                        hideProgressBar\r\n                        newestOnTop={false}\r\n                        closeOnClick\r\n                        rtl={false}\r\n                        pauseOnVisibilityChange\r\n                        draggable={false}\r\n                        pauseOnHover\r\n                        bodyClassName=\"toast-body\"\r\n                        style={{\"font-size\": \"0.8rem\"}}\r\n                    />\r\n                    <Card.Title className=\"small-card-title\">\r\n                        {title}\r\n                        <FavoriteShare url={url} title={title} source={source}/>\r\n                        <FaTrash onClick={this.bookmarkUnClick}/>\r\n                    </Card.Title>\r\n                    <div className=\"align-items-center justify-content-center\"\r\n                         style={{\r\n                             \"display\": \"flex\",\r\n                             \"width\": \"100%\",\r\n                             \"height\": \"100%\",\r\n                             \"padding\": \"1.25rem\",\r\n                             \"padding-bottom\": 0\r\n                         }}>\r\n                        <Image className=\"img-thumbnail img-fluid\" src={image}/>\r\n                    </div>\r\n                    <Card.Body>\r\n                        <Card.Text>\r\n                            <em>{date}</em>\r\n                            <span style={{\"float\": \"right\"}}>\r\n                                <Badge className={sectionClassName}\r\n                                       style={{\"margin-right\": \"0.2rem\", \"float\": \"none\"}}>{section}</Badge>\r\n                                <Badge className={sourceClassName} style={{\"float\": \"none\"}}>{source}</Badge>\r\n                            </span>\r\n                        </Card.Text>\r\n                    </Card.Body>\r\n                </div>\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(DetailFavorite);"]},"metadata":{},"sourceType":"module"}