{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI571\\\\hw8\\\\client\\\\src\\\\Components\\\\FavoriteList.js\";\nimport React, { Component } from \"react\";\nimport DetailFavorite from \"./DetailFavorite\";\nimport LoadSpinner from \"./LoadSpinner\";\nimport Col from \"react-bootstrap/Col\";\n\nclass FavoriteList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.callGuardian = (id, idx) => {\n      fetch(\"https://yli59322-hw8-571-backend.appspot.com/guardian/article\" + id).then(res => res.json()).then(res => {\n        let newdata = this.state.datas;\n        newdata.push(res['response']['content']);\n        this.setState({\n          datas: newdata\n        });\n        if (idx === this.props.ids.length - 1) this.setState({\n          isLoaded: true\n        });\n      }, error => {\n        this.setState({\n          error\n        });\n      });\n    };\n\n    this.callNYTimes = (id, idx) => {\n      fetch(\"https://yli59322-hw8-571-backend.appspot.com/nytimes/article\" + id).then(res => res.json()).then(res => {\n        let newdata = this.state.datas;\n        newdata.push(res['response']['docs'][0]);\n        this.setState({\n          datas: newdata\n        });\n        if (idx === this.props.ids.length - 1) this.setState({\n          isLoaded: true\n        });\n      }, error => {\n        this.setState({\n          error\n        });\n      });\n    };\n\n    this.state = {\n      ids: props.ids,\n      isLoaded: false,\n      datas: []\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, nextState) {\n    if (nextProps.ids !== nextState.ids) {\n      return {\n        ids: nextProps.ids,\n        datas: [],\n        isLoaded: false\n      };\n    }\n\n    return null;\n  }\n\n  componentDidMount() {\n    let id = [];\n\n    for (let i = 0; i < this.props.ids.length; i++) {\n      id.push(this.props.ids[i]);\n    }\n\n    for (let i = 0; i < id.length; i++) {\n      let checking = id[i].substr(4, 4) !== 'http';\n      if (checking) this.callGuardian(id[i], i);else this.callNYTimes(id[i], i);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.state.isLoaded === false) {\n      let id = [];\n\n      for (let i = 0; i < this.props.ids.length; i++) {\n        id.push(this.props.ids[i]);\n      }\n\n      for (let i = 0; i < id.length; i++) {\n        let checking = id[i].substr(4, 4) !== 'http';\n        if (checking) this.callGuardian(id[i], i);else this.callNYTimes(id[i], i);\n      }\n    }\n  }\n\n  render() {\n    console.log(this.state.datas);\n\n    if (this.props.ids.length === 0) {\n      return null;\n    } else if (this.state.error) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Error: \", this.state.error.message);\n    } else if (!this.state.isLoaded) {\n      return React.createElement(LoadSpinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      });\n    } else {\n      let array = [];\n\n      for (let i = 0; i < this.state.datas.length; i++) {\n        array.push(React.createElement(Col, {\n          md: 3,\n          style: {\n            \"padding\": 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(DetailFavorite, {\n          key: i,\n          data: this.state.datas[i],\n          handleDelete: this.props.handleDelete,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        })));\n      }\n\n      return React.createElement(\"div\", {\n        style: {\n          \"display\": \"flex\",\n          \"flex-wrap\": \"wrap\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, array);\n    }\n  }\n\n}\n\nexport default FavoriteList;","map":{"version":3,"sources":["C:/Users/75165/Documents/course/CSCI571/hw8/client/src/Components/FavoriteList.js"],"names":["React","Component","DetailFavorite","LoadSpinner","Col","FavoriteList","constructor","props","callGuardian","id","idx","fetch","then","res","json","newdata","state","datas","push","setState","ids","length","isLoaded","error","callNYTimes","getDerivedStateFromProps","nextProps","nextState","componentDidMount","i","checking","substr","componentDidUpdate","prevProps","prevState","snapshot","render","console","log","message","array","handleDelete"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport DetailFavorite from \"./DetailFavorite\";\r\nimport LoadSpinner from \"./LoadSpinner\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nclass FavoriteList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {ids: props.ids, isLoaded: false, datas: []};\r\n    }\r\n\r\n    callGuardian = (id, idx) => {\r\n        fetch(\"https://yli59322-hw8-571-backend.appspot.com/guardian/article\" + id)\r\n            .then(res => res.json())\r\n            .then(\r\n                res => {\r\n                    let newdata = this.state.datas;\r\n                    newdata.push(res['response']['content']);\r\n                    this.setState({datas: newdata});\r\n                    if (idx === this.props.ids.length - 1)\r\n                        this.setState({isLoaded: true});\r\n                }, error => {\r\n                    this.setState({error});\r\n                })\r\n    };\r\n\r\n    callNYTimes = (id, idx) => {\r\n        fetch(\"https://yli59322-hw8-571-backend.appspot.com/nytimes/article\" + id)\r\n            .then(res => res.json())\r\n            .then(\r\n                res => {\r\n                    let newdata = this.state.datas;\r\n                    newdata.push(res['response']['docs'][0]);\r\n                    this.setState({datas: newdata});\r\n                    if (idx === this.props.ids.length - 1)\r\n                        this.setState({isLoaded: true});\r\n                }, error => {\r\n                    this.setState({error});\r\n                })\r\n    };\r\n\r\n    static getDerivedStateFromProps(nextProps, nextState) {\r\n        if (nextProps.ids !== nextState.ids) {\r\n            return {\r\n                ids: nextProps.ids,\r\n                datas: [],\r\n                isLoaded: false\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        let id = [];\r\n        for (let i = 0; i < this.props.ids.length; i++) {\r\n            id.push(this.props.ids[i]);\r\n        }\r\n        for (let i = 0; i < id.length; i++) {\r\n            let checking = id[i].substr(4, 4) !== 'http';\r\n            if (checking)\r\n                this.callGuardian(id[i], i);\r\n            else\r\n                this.callNYTimes(id[i], i);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.state.isLoaded === false) {\r\n            let id = [];\r\n            for (let i = 0; i < this.props.ids.length; i++) {\r\n                id.push(this.props.ids[i]);\r\n            }\r\n            for (let i = 0; i < id.length; i++) {\r\n                let checking = id[i].substr(4, 4) !== 'http';\r\n                if (checking)\r\n                    this.callGuardian(id[i], i);\r\n                else\r\n                    this.callNYTimes(id[i], i);\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state.datas);\r\n        if (this.props.ids.length === 0) {\r\n            return null;\r\n        } else if (this.state.error) {\r\n            return <div>Error: {this.state.error.message}</div>;\r\n        } else if (!this.state.isLoaded) {\r\n            return <LoadSpinner/>;\r\n        } else {\r\n            let array = [];\r\n            for (let i = 0; i < this.state.datas.length; i++) {\r\n                array.push(\r\n                    <Col md={3} style={{\"padding\": 0}}>\r\n                        <DetailFavorite key={i} data={this.state.datas[i]} handleDelete={this.props.handleDelete}/>\r\n                    </Col>\r\n                );\r\n            }\r\n            return (\r\n                <div style={{\"display\": \"flex\", \"flex-wrap\": \"wrap\"}}>\r\n                    {array}\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default FavoriteList;"]},"metadata":{},"sourceType":"module"}