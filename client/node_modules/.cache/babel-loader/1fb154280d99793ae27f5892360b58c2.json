{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI 571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI 571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI 571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI 571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\75165\\\\Documents\\\\course\\\\CSCI 571\\\\hw8\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import AsyncSelect from\"react-select/async\";import{withRouter}from\"react-router-dom\";import{debounce}from\"throttle-debounce\";var SelectBar=/*#__PURE__*/function(_React$Component){_inherits(SelectBar,_React$Component);function SelectBar(props){var _this;_classCallCheck(this,SelectBar);_this=_possibleConstructorReturn(this,_getPrototypeOf(SelectBar).call(this,props));_this.loadOptions=function(inputValue,callback){setTimeout(function(){fetch(\"https://yutong-li.cognitiveservices.azure.com/bing/v7.0/suggestions?mkt=en-US&q=\"+_this.state.inputValue,{headers:{'Ocp-Apim-Subscription-Key':'a42b6d1b1fad47d7b33425d7eea2f04f'}}).then(function(res){return res.json();}).then(function(res){var suggestions=[];if(\"suggestionGroups\"in res){var resfilter=res[\"suggestionGroups\"][0][\"searchSuggestions\"];for(var i=0;i<resfilter.length;i++){var val=resfilter[i][\"displayText\"];suggestions.push({value:val,label:val});}}callback(suggestions);});});};_this.handleInputChange=function(newValue){var inputValue=newValue.replace(/\\W/g,'');_this.setState({inputValue:inputValue});return inputValue;};_this.handleChange=function(q){console.log(q.value);var queryString=\"q=\"+q.value;_this.props.history.push('/search?'+queryString);};var checking;if(window.localStorage.getItem(\"switchchecked\")){checking=window.localStorage.getItem(\"switchchecked\")===\"true\";}else{checking=true;}_this.state={options:{},SwitchChecked:checking};_this.loadOptions=debounce(1000,_this.loadOptions);return _this;}_createClass(SelectBar,[{key:\"render\",value:function render(){return React.createElement(AsyncSelect,{placeholder:\"Enter keyword ..\",className:\"selectBar\",onInputChange:this.handleInputChange,loadOptions:this.loadOptions,onChange:this.handleChange,noOptionsMessage:function noOptionsMessage(){return\"No Match\";}});}}]);return SelectBar;}(React.Component);export default withRouter(SelectBar);","map":{"version":3,"sources":["C:/Users/75165/Documents/course/CSCI 571/hw8/client/src/Components/SelectBar.js"],"names":["React","AsyncSelect","withRouter","debounce","SelectBar","props","loadOptions","inputValue","callback","setTimeout","fetch","state","headers","then","res","json","suggestions","resfilter","i","length","val","push","value","label","handleInputChange","newValue","replace","setState","handleChange","q","console","log","queryString","history","checking","window","localStorage","getItem","options","SwitchChecked","Component"],"mappings":"45BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAAQC,QAAR,KAAuB,mBAAvB,C,GAEMC,CAAAA,S,+EACF,mBAAYC,KAAZ,CAAmB,2CACf,2EAAMA,KAAN,GADe,MAYnBC,WAZmB,CAYL,SAACC,UAAD,CAAaC,QAAb,CAA0B,CACpCC,UAAU,CAAC,UAAM,CACbC,KAAK,CACD,mFAAqF,MAAKC,KAAL,CAAWJ,UAD/F,CAC2G,CACxGK,OAAO,CAAE,CACL,4BAA6B,kCADxB,CAD+F,CAD3G,CAAL,CAKOC,IALP,CAKY,SAAAC,GAAG,CAAI,CACf,MAAOA,CAAAA,GAAG,CAACC,IAAJ,EAAP,CACH,CAPD,EAOGF,IAPH,CAOQ,SAACC,GAAD,CAAS,CACb,GAAIE,CAAAA,WAAW,CAAG,EAAlB,CACA,GAAI,oBAAsBF,CAAAA,GAA1B,CAA+B,CAC3B,GAAIG,CAAAA,SAAS,CAAGH,GAAG,CAAC,kBAAD,CAAH,CAAwB,CAAxB,EAA2B,mBAA3B,CAAhB,CACA,IAAK,GAAII,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,SAAS,CAACE,MAA9B,CAAsCD,CAAC,EAAvC,CAA2C,CACvC,GAAIE,CAAAA,GAAG,CAAGH,SAAS,CAACC,CAAD,CAAT,CAAa,aAAb,CAAV,CACAF,WAAW,CAACK,IAAZ,CAAiB,CAACC,KAAK,CAAEF,GAAR,CAAaG,KAAK,CAAEH,GAApB,CAAjB,EACH,CACJ,CACDZ,QAAQ,CAACQ,WAAD,CAAR,CACH,CAjBD,EAkBH,CAnBS,CAAV,CAoBH,CAjCkB,OAmCnBQ,iBAnCmB,CAmCC,SAACC,QAAD,CAAc,CAC9B,GAAMlB,CAAAA,UAAU,CAAGkB,QAAQ,CAACC,OAAT,CAAiB,KAAjB,CAAwB,EAAxB,CAAnB,CACA,MAAKC,QAAL,CAAc,CAACpB,UAAU,CAAVA,UAAD,CAAd,EACA,MAAOA,CAAAA,UAAP,CACH,CAvCkB,OAyCnBqB,YAzCmB,CAyCJ,SAACC,CAAD,CAAO,CAClBC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACP,KAAd,EACA,GAAIU,CAAAA,WAAW,CAAG,KAAOH,CAAC,CAACP,KAA3B,CACA,MAAKjB,KAAL,CAAW4B,OAAX,CAAmBZ,IAAnB,CAAwB,WAAaW,WAArC,EACH,CA7CkB,CAEf,GAAIE,CAAAA,QAAJ,CACA,GAAIC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,CAAJ,CAAkD,CAC9CH,QAAQ,CAAIC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,IAAiD,MAA7D,CACH,CAFD,IAEO,CACHH,QAAQ,CAAG,IAAX,CACH,CACD,MAAKvB,KAAL,CAAa,CAAC2B,OAAO,CAAE,EAAV,CAAcC,aAAa,CAAEL,QAA7B,CAAb,CACA,MAAK5B,WAAL,CAAmBH,QAAQ,CAAC,IAAD,CAAO,MAAKG,WAAZ,CAA3B,CATe,aAUlB,C,6DAqCQ,CACL,MACI,qBAAC,WAAD,EACI,WAAW,CAAC,kBADhB,CAEI,SAAS,CAAC,WAFd,CAGI,aAAa,CAAE,KAAKkB,iBAHxB,CAII,WAAW,CAAE,KAAKlB,WAJtB,CAKI,QAAQ,CAAE,KAAKsB,YALnB,CAMI,gBAAgB,CAAE,2BAAM,CACpB,MAAO,UAAP,CACH,CARL,EADJ,CAYH,C,uBA7DmB5B,KAAK,CAACwC,S,EAgE9B,cAAetC,CAAAA,UAAU,CAACE,SAAD,CAAzB","sourcesContent":["import React from \"react\";\r\nimport AsyncSelect from \"react-select/async\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {debounce} from \"throttle-debounce\";\r\n\r\nclass SelectBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let checking;\r\n        if (window.localStorage.getItem(\"switchchecked\")) {\r\n            checking = (window.localStorage.getItem(\"switchchecked\") === \"true\");\r\n        } else {\r\n            checking = true;\r\n        }\r\n        this.state = {options: {}, SwitchChecked: checking};\r\n        this.loadOptions = debounce(1000, this.loadOptions);\r\n    }\r\n\r\n    loadOptions = (inputValue, callback) => {\r\n        setTimeout(() => {\r\n            fetch(\r\n                \"https://yutong-li.cognitiveservices.azure.com/bing/v7.0/suggestions?mkt=en-US&q=\" + this.state.inputValue, {\r\n                    headers: {\r\n                        'Ocp-Apim-Subscription-Key': 'a42b6d1b1fad47d7b33425d7eea2f04f'\r\n                    }\r\n                }).then(res => {\r\n                return res.json();\r\n            }).then((res) => {\r\n                let suggestions = [];\r\n                if (\"suggestionGroups\" in res) {\r\n                    var resfilter = res[\"suggestionGroups\"][0][\"searchSuggestions\"];\r\n                    for (var i = 0; i < resfilter.length; i++) {\r\n                        let val = resfilter[i][\"displayText\"];\r\n                        suggestions.push({value: val, label: val});\r\n                    }\r\n                }\r\n                callback(suggestions);\r\n            });\r\n        });\r\n    };\r\n\r\n    handleInputChange = (newValue) => {\r\n        const inputValue = newValue.replace(/\\W/g, '');\r\n        this.setState({inputValue});\r\n        return inputValue;\r\n    };\r\n\r\n    handleChange = (q) => {\r\n        console.log(q.value);\r\n        let queryString = \"q=\" + q.value;\r\n        this.props.history.push('/search?' + queryString);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <AsyncSelect\r\n                placeholder=\"Enter keyword ..\"\r\n                className=\"selectBar\"\r\n                onInputChange={this.handleInputChange}\r\n                loadOptions={this.loadOptions}\r\n                onChange={this.handleChange}\r\n                noOptionsMessage={() => {\r\n                    return \"No Match\";\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(SelectBar);\r\n"]},"metadata":{},"sourceType":"module"}